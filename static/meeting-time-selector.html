<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>International Meeting Time Selector</title>

    <style>
        :root {
            --bg: #0f172a;
            --card: #111827;
            --accent: #38bdf8;
            --text: #e5e7eb;
            --muted: #9ca3af;
            --grid: #1f2937;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto;
            background: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 950px;
            width: 100%;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
        }

        .panel {
            background: var(--card);
            border-radius: 16px;
            padding: 16px 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, .35);
        }

        .row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        select,
        input {
            background: #020617;
            color: var(--text);
            border: 1px solid #1e293b;
            border-radius: 12px;
            padding: 10px 12px;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .slot {
            padding: 10px;
            background: var(--grid);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .slot:hover {
            border-color: var(--accent);
        }

        .slot.selected {
            background: #082f49;
            border-color: var(--accent);
        }

        .result {
            margin-top: 12px;
            padding: 12px;
            border-radius: 12px;
            background: #020617;
        }

        @media(max-width:700px) {
            .time-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üåç International Meeting Time Selector</h1>
        <div class="panel">

            <div class="row">
                <div>
                    <div>üìç Your timezone</div>
                    <select id="tzLocal"></select>
                </div>

                <div>
                    <div>üåé Target timezone</div>
                    <select id="tzTarget"></select>
                </div>

                <div>
                    <div>üìÖ Date</div>
                    <input id="datePicker" type="date">
                </div>
            </div>

            <h3>üïí Select a time slot</h3>
            <div id="grid" class="time-grid"></div>

            <div id="output" class="result">
                Select a slot to see converted time
            </div>
        </div>
    </div>

    <script>
        // ---------- timezone list ----------
        const timezones = Intl.supportedValuesOf("timeZone");
        const tzLocal = document.getElementById("tzLocal");
        const tzTarget = document.getElementById("tzTarget");
        const datePicker = document.getElementById("datePicker");
        const grid = document.getElementById("grid");
        const output = document.getElementById("output");

        function fillTzSelect(select, defaultValue) {
            timezones.forEach(tz => {
                const opt = document.createElement("option");
                opt.value = tz;
                opt.textContent = tz;
                if (tz === defaultValue) opt.selected = true;
                select.appendChild(opt);
            });
        }

        fillTzSelect(tzLocal, Intl.DateTimeFormat().resolvedOptions().timeZone);
        fillTzSelect(tzTarget, "UTC");

        // ---------- date ----------
        const today = new Date().toISOString().split("T")[0];
        datePicker.value = today;

        // ---------- build time grid ----------
        function buildGrid() {
            grid.innerHTML = "";
            for (let h = 0; h < 24; h++) {
                const slot = document.createElement("div");
                slot.className = "slot";
                const label = (h < 10 ? "0" : "") + h + ":00";
                slot.textContent = label;
                slot.dataset.hour = h;
                slot.onclick = () => selectSlot(slot);
                grid.appendChild(slot);
            }
        }

        buildGrid();

        // ---------- selection ----------
        let selected = null;

        function selectSlot(slot) {
            if (selected) selected.classList.remove("selected");
            selected = slot;
            slot.classList.add("selected");
            calculate();
        }

        // ---------- conversion ----------
        function calculate() {
            if (!selected) return;

            const hour = parseInt(selected.dataset.hour);
            const date = datePicker.value;

            const sourceTz = tzLocal.value;
            const targetTz = tzTarget.value;

            // date in local tz
            const localDateTime = new Date(`${date}T${String(hour).padStart(2, "0")}:00:00`);

            // convert using formatting trick
            const srcString = new Intl.DateTimeFormat("en-US", {
                timeZone: sourceTz,
                hour: "2-digit", minute: "2-digit",
                year: "numeric", month: "2-digit", day: "2-digit"
            }).format(localDateTime);

            const srcDate = new Date(srcString);

            const targetString = new Intl.DateTimeFormat("en-US", {
                timeZone: targetTz,
                hour: "2-digit", minute: "2-digit",
                year: "numeric", month: "2-digit", day: "2-digit"
            }).format(srcDate);

            output.innerHTML = `
    <b>Selected time</b><br>
    ${date} ${String(hour).padStart(2, "0")}:00 (${sourceTz})<br><br>
    <b>Converted time</b><br>
    ${targetString} (${targetTz})
  `;
        }

        tzLocal.onchange = calculate;
        tzTarget.onchange = calculate;
        datePicker.onchange = calculate;
    </script>
</body>

</html>